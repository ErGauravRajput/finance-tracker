import{u as f,r as n,a as j,j as a,N as b}from"./index-Rc-Xpk4O.js";import{a as v}from"./axios-CIYRMzzG.js";const w=()=>{const{isAuthenticated:h,login:o}=f(),[e,p]=n.useState({email:"",password:""}),[i,l]=n.useState(!1),[d,u]=n.useState(""),c=j();if(h)return a.jsx(b,{to:"/dashboard"});const m=s=>p(t=>({...t,[s.target.name]:s.target.value})),x=n.useCallback(async s=>{var t,g;s.preventDefault(),l(!0),u("");try{const{data:r}=await v.post("/auth/login",e);o(r.token,r.user),c("/dashboard")}catch(r){u(((g=(t=r.response)==null?void 0:t.data)==null?void 0:g.message)||"Login failed")}finally{l(!1)}},[e,o,c]);return a.jsxs("div",{className:"auth-card",children:[a.jsx("h2",{children:"Login"}),a.jsxs("form",{onSubmit:x,className:"form",children:[a.jsxs("label",{children:["Email",a.jsx("input",{name:"email",type:"email",required:!0,value:e.email,onChange:m})]}),a.jsxs("label",{children:["Password",a.jsx("input",{name:"password",type:"password",required:!0,value:e.password,onChange:m})]}),d&&a.jsx("p",{className:"error",children:d}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Logging in...":"Login"})]})]})};export{w as default};
